# Pet Project Blog

–ü—Ä–æ—Å—Ç–æ–π –±–ª–æ–≥ –Ω–∞ Go —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Gin, —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –º–∏–≥—Ä–∞—Ü–∏–π PostgreSQL.

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
pet_project_blog/
  cmd/app/main.go         # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
  internal/
    config/               # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    handlers/             # HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (Gin)
    migrations/           # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (SQL)
    models/               # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
    repository/           # –†–∞–±–æ—Ç–∞ —Å –ë–î (PostgreSQL)
    services/             # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```sh
   git clone <your-repo-url>
   cd pet_project_blog
   ```
2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```sh
   go mod download
   ```
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - `APP_PORT` ‚Äî –ø–æ—Ä—Ç HTTP-—Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8080)
   - `DB_CONN_STR` ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
     
     –ü—Ä–∏–º–µ—Ä:
     ```sh
     export APP_PORT=8080
     export DB_CONN_STR="postgres://user:password@localhost:5432/blog?sslmode=disable"
     ```
4. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```sh
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ golang-migrate, –µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   migrate -path internal/migrations -database "$DB_CONN_STR" up
   ```
5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   ```sh
   go run cmd/app/main.go
   ```

## üõ†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ—Å—Ç–æ–≤ (`GET /posts`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ –ø–æ ID —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ (`GET /posts/:id`)
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ (`POST /posts`)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è –∫ –ø–æ—Å—Ç—É (`POST /posts/:id/comments`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ—Å—Ç–∞ (`GET /posts/:id/comments`)
- –ì–∏–±–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–µ–π —á–µ—Ä–µ–∑ query-–ø–∞—Ä–∞–º–µ—Ç—Ä `fields`
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`POST /register`)
- –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ª–æ–≥–∏–Ω) (`POST /login`)
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cookie (—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤)

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã:
  ```sh
  curl http://localhost:8080/posts
  ```
- –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ id –∏ title:
  ```sh
  curl http://localhost:8080/posts?fields=id,title
  ```
- –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç –ø–æ ID —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏:
  ```sh
  curl http://localhost:8080/posts/1
  ```
- –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç:
  ```sh
  curl -X POST http://localhost:8080/posts -H 'Content-Type: application/json' -d '{"title":"–ó–∞–≥–æ–ª–æ–≤–æ–∫","content":"–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞"}'
  ```
- –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:
  ```sh
  curl -X POST http://localhost:8080/posts/1/comments -H 'Content-Type: application/json' -d '{"content":"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"}'
  ```
- –ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç—É:
  ```sh
  curl http://localhost:8080/posts/1/comments
  ```
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
  ```sh
  curl -X POST http://localhost:8080/register -H 'Content-Type: application/json' -d '{"email":"user@example.com","password":"password123"}'
  ```
- –í–æ–π—Ç–∏ (–ª–æ–≥–∏–Ω):
  ```sh
  curl -X POST http://localhost:8080/login -H 'Content-Type: application/json' -d '{"email":"user@example.com","password":"password123"}'
  ```

- –ü–æ–ª—É—á–∏—Ç—å JWT-—Ç–æ–∫–µ–Ω:
  –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ª–æ–≥–∏–Ω–∞ –≤ –æ—Ç–≤–µ—Ç–µ –±—É–¥–µ—Ç –ø–æ–ª–µ `token`. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç):
  ```sh
  curl -X POST http://localhost:8080/posts \
    -H 'Content-Type: application/json' \
    -H 'Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>' \
    -d '{"title":"–ó–∞–≥–æ–ª–æ–≤–æ–∫","content":"–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞"}'
  ```
